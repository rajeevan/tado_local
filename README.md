# Tado Local for Home Assistant (HACS)

This integration provides a Home Assistant interface for the **[AmpScm/TadoLocal](https://github.com/AmpScm/TadoLocal)** service. 

While the official Tado integration relies on the Tado Cloud API (which is subject to rate limits and internet dependency), this integration communicates directly with the **TadoLocal bridge** running on your network. This allows for faster local control and ensures your heating stays manageable even if the internet goes down.

## What is this for?
This HACS integration is the "client" part of a local-control setup. It connects to the API endpoints provided by the [AmpScm/TadoLocal](https://github.com/AmpScm/TadoLocal) project. 

**Key Benefits:**
- **Local-Only**: No traffic sent to Tado's cloud servers for heating commands.
- **Bypass Rate Limits**: Avoid the daily request quotas recently introduced for Tado Cloud users.
- **Improved Latency**: Commands are sent directly over your LAN.
- **Real-time Updates**: Uses Server-Sent Events (SSE) for instant state updates without polling.

## Prerequisites
Before installing this integration, you must have the **TadoLocal API service** up and running. 
- **API Repository**: [AmpScm/TadoLocal](https://github.com/AmpScm/TadoLocal)
- You will need the **IP address**, **Port** (default 8000), and the **Bearer Token** generated by that service.

## Features
- **Automatic Discovery**: Automatically adds Climate entities for every Tado Zone found on the bridge.
- **Real-time Updates**: Uses Server-Sent Events (SSE) from the `/events` endpoint for instant state updates. Changes to temperature, mode, and heating status are reflected immediately in Home Assistant without polling delays.
- **Local Push Updates**: Configured as `local_push` integration type - Home Assistant processes events as they arrive from the server.
- **Full Control**: Support for setting Target Temperature and switching between `Heat`, `Off`, and `Auto` modes.
- `Auto` : When this HVAC mode is selected, it will set the temperature to `-1`. Which will set temperature to last set temperature... *Tado official cloud will see this as manual change!*
## Installation

### 1. HACS (Custom Repository)
1. Open **HACS** in Home Assistant.
2. Click the three dots (top-right) and select **Custom repositories**.
3. Add the URL of your repository and select **Integration** as the category.
4. Click **Download**.
5. **Restart Home Assistant.**

### 2. Manual Installation
1. Copy the `custom_components/tado_local` folder into your HA `/config/custom_components/` directory.
2. **Restart Home Assistant.**

## Configuration
1. Go to **Settings** > **Devices & Services**.
2. Click **Add Integration** and search for **Tado Local**.
3. Enter the details from your AmpScm/TadoLocal instance:
   - **URL**: e.g., `http://192.168.1.50`
   - **Port**: e.g., `8000`
   - **Token**: _anything_

## How It Works

### Real-time Updates via SSE
The integration connects to the `/events` endpoint using Server-Sent Events (SSE) to receive real-time updates:
- **Zone State Changes**: Temperature, humidity, target temperature, mode, and heating status updates
- **Device State Changes**: Individual device updates that map to their respective zones
- **Automatic Reconnection**: If the SSE connection drops, it automatically reconnects with exponential backoff
- **Fallback Polling**: If SSE fails, the integration falls back to polling every 5 minutes

### Entity Updates
When state changes occur on the TadoLocal server:
1. The server sends an SSE event
2. The coordinator processes the event immediately
3. Entity states are updated in Home Assistant via `local_push`
4. No polling delay - updates appear instantly

## Technical Details
- **Integration Type**: `local_push` - processes events as they arrive
- **Update Method**: Primary: Server-Sent Events (SSE), Fallback: HTTP polling
- **Entity Prefix**: All climate entities are named with `local_` prefix
- **Supported Modes**: `off`, `heat`, `auto` (resume schedule)

---
*Disclaimer: This project is a community-driven integration and is not affiliated with Tado GmbH.*